# Phase 36: Complete Call Center Integration

## Database
- [ ] Add `CallCenterSettings` model to schema.prisma
- [ ] Add new fields to [SipExtension](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/frontend/src/api/callCenter.ts#6-17) (gdmsExtensionId, registrationStatus, etc.)
- [ ] Add new fields to [CallRecord](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/frontend/src/api/callCenter.ts#18-36) (gdmsCallId, recordingSize, recordingDownloaded)
- [ ] Add `callCenterSettings` relation to [Tenant](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/backend/src/websocket/websocket.gateway.ts#114-121) model
- [ ] Run migration

## Backend Services
- [ ] Create `gdms-api.service.ts` — GDMS API client with encrypt/decrypt, testConnection, extension management, call logs sync, recording management
- [ ] Create `call-center-settings.service.ts` — getSettings, updateSettings, testConnection, autoAssignExtension
- [ ] Create `call-center-settings.controller.ts` — GET/PUT settings, POST test-connection, POST auto-assign
- [ ] Update [call-center.module.ts](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/backend/src/call-center/call-center.module.ts) with new services and controller

## Frontend
- [ ] Create `CallCenterSettingsPage.tsx` — 4 sections (UCM, GDMS, Extensions, Recording)
- [ ] Add API functions to [callCenter.ts](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/frontend/src/api/callCenter.ts) (getSettings, updateSettings, testConnection)
- [ ] Add route `settings/call-center` in [App.tsx](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/frontend/src/App.tsx)
- [ ] Add lazy import for `CallCenterSettingsPage`

## Deploy & Verify
- [ ] Build and deploy to production
- [ ] Verify settings page loads
- [ ] Verify save/edit flow works
