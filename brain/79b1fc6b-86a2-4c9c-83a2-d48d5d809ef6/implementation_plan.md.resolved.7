# Phase C â€” Security & Trust Foundation

## Status: ðŸ“‹ DESIGN â€” Awaiting Approval

---

## 1. Role-Based Access Control (RBAC)

### Existing Roles

| Role | Arabic | Level |
|------|--------|-------|
| OWNER | Ù…Ø§Ù„Ùƒ | Full access |
| LAWYER | Ù…Ø­Ø§Ù…ÙŠ | Case-level access |
| ASSISTANT | Ù…Ø³Ø§Ø¹Ø¯ | View + limited edit |
| ACCOUNTANT | Ù…Ø­Ø§Ø³Ø¨ | Billing only |
| VIEWER | Ù…Ø´Ø§Ù‡Ø¯ | Read-only |

### Permission Matrix

| Resource | OWNER | LAWYER | ASSISTANT | ACCOUNTANT | VIEWER |
|----------|:-----:|:------:|:---------:|:----------:|:------:|
| Cases | âœ“ | Assigned | View | âœ— | View |
| Clients | âœ“ | Assigned | View | âœ— | View |
| Tasks | âœ“ | Assigned | View | âœ— | View |
| Documents | âœ“ | Assigned | View | âœ— | View |
| Invoices | âœ“ | View | View | âœ“ | View |
| Users | âœ“ | âœ— | âœ— | âœ— | âœ— |
| Settings | âœ“ | âœ— | âœ— | âœ— | âœ— |
| Audit Logs | âœ“ | âœ— | âœ— | âœ— | âœ— |

---

## 2. Confidential Data Handling

### UI Patterns
- Locked icon for encrypted fields
- "Early Access" badge for confidential notes
- Role-based visibility indicators

### Access Boundaries
- Notes visible only to assigned users
- Encrypted at rest (CryptoService ready)
- No logging of decrypted content

---

## 3. Audit Logs Foundation

### Log Types

| Type | Description |
|------|-------------|
| AUTH | Login, logout, password change |
| DATA | Create, update, delete records |
| ACCESS | View sensitive data |
| ADMIN | User management, settings |

### UI (Read-Only)
- Log viewer for OWNER only
- Filter by type, date, user
- No edit/delete capability

---

## 4. Trust-Oriented UX

### Security Indicators
- Role badge in header
- Access level on sensitive pages
- "Data protected" footer

### Boundaries
- Graceful permission denied
- No data leakage in errors
- Clear "you don't have access" messages

---

## 5. Implementation Scope

| Component | Action |
|-----------|--------|
| RBAC constants | Frontend constants file |
| Permission hook | `usePermissions()` |
| Audit logs UI | Read-only page |
| Trust indicators | UI components |

---

**Awaiting approval before execution.**
