# Phase 28: Legal Document Editor

## Database & Schema
- [x] Add `LegalDocumentType` and `LegalDocumentStatus` enums
- [x] Add [LegalDocument](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/frontend/src/pages/legal-documents/LegalDocumentsPage.tsx#33-267), `LegalDocumentVersion`, `LegalDocTemplate` models
- [x] Add reverse relations to [Tenant](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/backend/src/super-admin/super-admin.controller.ts#24-25), [User](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/frontend/src/stores/auth.store.ts#5-20), [Case](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/frontend/src/stores/auth.store.ts#108-112), [Client](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/backend/src/ai/ai.service.ts#20-26)
- [x] Create SQL migration ([phase28_legal_documents.sql](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/backend/prisma/phase28_legal_documents.sql)) with 4 system templates

## Backend
- [x] Create [legal-documents.service.ts](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/backend/src/legal-documents/legal-documents.service.ts) (CRUD, versioning, templates, export, search, AI)
- [x] Create [legal-documents.controller.ts](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/backend/src/legal-documents/legal-documents.controller.ts) (REST endpoints)
- [x] Create [legal-documents.module.ts](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/backend/src/legal-documents/legal-documents.module.ts)
- [x] Register [LegalDocumentsModule](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/backend/src/legal-documents/legal-documents.module.ts#6-13) in [app.module.ts](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/backend/src/app.module.ts)

## Frontend
- [x] Create [legalDocuments.ts](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/frontend/src/api/legalDocuments.ts) API client
- [x] Create [LegalDocumentsPage.tsx](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/frontend/src/pages/legal-documents/LegalDocumentsPage.tsx) (listing with filters/search)
- [x] Create [NewDocumentPage.tsx](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/frontend/src/pages/legal-documents/NewDocumentPage.tsx) (type selection + template picker)
- [x] Create [LegalDocumentEditorPage.tsx](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/frontend/src/pages/legal-documents/LegalDocumentEditorPage.tsx) (rich editor with toolbar, A4 simulation, auto-save, print, version history)
- [x] Add routes in [App.tsx](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/frontend/src/App.tsx)
- [x] Add sidebar link in [Sidebar.tsx](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/frontend/src/components/layout/Sidebar.tsx)
- [x] Fix all lint warnings (unused imports, correct toast library)

## Remaining (for deployment)
- [ ] Run `prisma generate` to update PrismaClient types
- [ ] Run SQL migration on database
- [ ] Build and verify
