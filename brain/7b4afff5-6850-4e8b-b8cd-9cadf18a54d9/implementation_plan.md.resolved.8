# ุชูุณูุน ุตูุญุฉ ุงูุชูุงููุงุช ูุงูุฑุจุท ูู ุงูุณูุจุฑ ุฃุฏูู

## ุงููุฏู
1. ุฅุถุงูุฉ 5 ุฃูุณุงู ุชูุงูู ุฌุฏูุฏุฉ ูู ุตูุญุฉ ุงูุณูุจุฑ ุฃุฏูู: **SMTP** | **WhatsApp Business** | **Call Center** | **Google Calendar** | **SendGrid**
2. ูุตู ุฅุนุฏุงุฏุงุช SMTP ูู env vars ุงูููุจุฑูุฌุฉ ูู ุงูููุฏ ูุฑุจุทูุง ุจุฌุฏูู `SystemConfig` ููุชู ุงูุชุญูู ุจูุง ูู ุงูุตูุญุฉ

## ุงููุถุน ุงูุญุงูู

| ุงูููููู | ุงูุญุงูุฉ |
|---|---|
| [SAIntegrationsPage.tsx](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/frontend/src/pages/super-admin/SAIntegrationsPage.tsx) | ูุญุชูู ููุท ุนูู ูุณู AI + ุจุทุงูุงุช "ูุฑูุจูุง" |
| [email.service.ts](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/backend/src/email/email.service.ts) | ูุฑุฌุน ูู env vars (`SMTP_HOST/USER/PASS`) ูู fallback |
| Backend `super-admin/config` API | ุฌุงูุฒ โ `GET/POST/DELETE` ุนูู `SystemConfig` |
| Backend `tenants/smtp-settings` API | ุฌุงูุฒ โ ููููุงุชุจ ุงููุฑุฏูุฉ |

---

## ุงูุชุบููุฑุงุช ุงููุทููุจุฉ

### Backend

#### [MODIFY] [email.service.ts](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq system projec/watheeq-mvp/backend/src/email/email.service.ts)
- ุชุนุฏูู [getTransporter()](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/backend/src/email/email.service.ts#15-57) โ ุจุฏูุงู ูู `configService.get('SMTP_HOST')` ููุฑุฃ ุฃููุงู ูู `SystemConfig` (category: `smtp`)
- ุชุนุฏูู [getFromAddress()](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/backend/src/email/email.service.ts#58-83) โ ููุณ ุงูุดูุก
- ุชุฑุชูุจ ุงูุฃููููุฉ: **Tenant SMTP โ SystemConfig SMTP โ env vars**

#### [MODIFY] [super-admin.controller.ts](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq system projec/watheeq-mvp/backend/src/super-admin/super-admin.controller.ts)
- ุฅุถุงูุฉ endpoint ูุงุฎุชุจุงุฑ SMTP: `POST config/test-smtp`

#### [MODIFY] [super-admin.service.ts](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq system projec/watheeq-mvp/backend/src/super-admin/super-admin.service.ts)
- ุฅุถุงูุฉ method `testSmtpConnection()` โ ููุฑุฃ ุฅุนุฏุงุฏุงุช SMTP ูู SystemConfig ููุฑุณู ุจุฑูุฏ ุงุฎุชุจุงุฑ

---

### Frontend

#### [MODIFY] [SAIntegrationsPage.tsx](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq system projec/watheeq-mvp/frontend/src/pages/super-admin/SAIntegrationsPage.tsx)

ุฅุนุงุฏุฉ ุจูุงุก ุงูุตูุญุฉ ูุชุดูู **6 ุฃูุณุงู**:

| ุงููุณู | ุงูุญููู | ุงูุญุงูุฉ |
|---|---|---|
| ๐ง ุงูุฐูุงุก ุงูุงุตุทูุงุนู | โ ููุฌูุฏ | ููุง ูู |
| ๐ง SMTP ุงูุจุฑูุฏ | Host, Port, User, Pass, From, FromName, Secure | **ูุนูุงู** |
| ๐ฑ WhatsApp Business | API Token, Phone Number ID, Business Account ID | **ุฅุนุฏุงุฏ** |
| ๐ ูุฑูุฒ ุงูุงุชุตุงู | Provider, API Key, Account SID | **ุฅุนุฏุงุฏ** |
| ๐ Google Calendar | Client ID, Client Secret, Redirect URI | **ุฅุนุฏุงุฏ** |
| โ๏ธ SendGrid | API Key, From Email, From Name | **ุฅุนุฏุงุฏ** |

- ูู ูุณู ูุณุชุฎุฏู ููุณ pattern ุงูู `super-admin/config` API ูุน category ูุฎุชููุฉ
- SMTP: ุฃุฒุฑุงุฑ **ุญูุธ** + **ุงุฎุชุจุงุฑ ุงูุงุชุตุงู** (ูุฑุณู ุจุฑูุฏ ุงุฎุชุจุงุฑ)
- ุจุงูู ุงูุฃูุณุงู: ุญูุธ ููุท (ุงูุงุฎุชุจุงุฑ ูุงุญูุงู ุนูุฏ ุจูุงุก ุงูุชูุงููุงุช)

> [!IMPORTANT]
> ุงูู SMTP ุณูููู ูุนูุงู ุจุงููุงูู ูุน ุฅููุงููุฉ ุงูุงุฎุชุจุงุฑ.
> ุจุงูู ุงูุชูุงููุงุช (WhatsApp, Call Center, Google Calendar, SendGrid) โ ุญูุธ ุงูุฅุนุฏุงุฏุงุช ููุท (UI + ุงุณุชุฏุนุงุก config API). ุงูุชูุงูู ุงููุนูู ููุจูู ูุงุญูุงู.

---

## ุฎุทุฉ ุงูุชุญูู

### ุงุฎุชุจุงุฑ ุชููุงุฆู
- ุญูุธ ุฅุนุฏุงุฏุงุช SMTP ูู ุงูุตูุญุฉ โ ุงูุชุญูู ูู ุธููุฑูุง ูู `SystemConfig`
- ุงุฎุชุจุงุฑ ุงุชุตุงู SMTP โ ุฅุฑุณุงู ุจุฑูุฏ ุงุฎุชุจุงุฑ
- ุงูุชุญูู ูู ุฃู [email.service.ts](file:///Users/hamzabuhlakq/Downloads/succes-mark/projects-2026/wathiq%20system%20projec/watheeq-mvp/backend/src/email/email.service.ts) ููุฑุฃ ูู `SystemConfig` ุนูุฏ ุนุฏู ูุฌูุฏ tenant SMTP

### ุงุฎุชุจุงุฑ ูุฏูู  
- ูุชุญ ุตูุญุฉ ุงูุชูุงููุงุช ูู ุงูุณูุจุฑ ุฃุฏูู ูุงูุชุญูู ูู ุธููุฑ ุฌููุน ุงูุฃูุณุงู
- ุญูุธ ูุชุนุฏูู ุฅุนุฏุงุฏุงุช ูู ูุณู
